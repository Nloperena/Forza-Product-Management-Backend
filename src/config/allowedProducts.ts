/**
 * Whitelist of allowed product IDs
 * Only products in this list will be returned by the API
 * Set ENABLE_PRODUCT_WHITELIST=true in .env to enable filtering
 * 
 * Note: 33 products in this list don't exist in the database yet.
 * They will be filtered automatically when they're added.
 */
export const ALLOWED_PRODUCT_IDS = [
  'IC932',
  'IC933',
  'IC934',
  'IC946',
  'IC947',
  '81-0389',  // Note: handles both '81-0389' and '81-O389' variations
  'C130',
  'C150',
  'C331',
  'FRP',
  'OA4',
  'OA12',
  'OA13',
  'OA23',
  'OS24',
  'OS40',
  'OS41',
  'OS42',
  'OS43',
  'OS52',
  'OS53',
  'OS72',
  'OS73',
  'OS74',
  'OS80',
  'OS82',
  'OS83',
  'OS88',
  'OS89',
  'OS91',
  'OS92',
  'OS155',
  'R147',
  'R148',
  'R297',
  'S110',
  'S255',
  'S256',
  'S670',
  'S821',
  'S828',
  'TAC-734G',
  'TAC-735R',
  'TAC-738R',
  'TAC-739R',
  'MC722',
  'MC723',
  'MC724',
  'MC737',
  'MC741',
  'M-OS764',
  'M-OA755',
  'M-R420',
  'M-R445',
  'M-OSA783',
  'M-S750',
  'M-C280',
  'M-C285',
  'M-OS789',
  'M-OS796',
  'M-T815',
  'M-T820',
  'TC452',
  'TC453',
  'TC454',
  'TC456',
  'TC466',
  'TC467',
  'T-OSA155',
  'T-OA152',
  'T-S596',
  'T-R679',
  'T-R785',
  'T-OA156',
  'T-OA177',
  'T-C222',
  'T-C225',
  'T-C485',
  'T-OS150',
  'T-OS151',
  'T-OS164',
  'T-T415',
  'T-T420',
  'T-T1200',
  'T-T1420',
  'T-T430',
  'CC501',
  'CC507',
  'CC513',
  'CC515',
  'CC519',
  'CC503',
  'C-C360',
  'C-C551',
  'C-OA98',
  'C-OS55',
  'C-R329',
  'C-R552',
  'C-R560',
  'C-OA5',
  'C-OA52',
  'C-OSA',
  'C-OA77',
  'C-S538',
  'C-W6106',
  'C-OS9',
  'C-T500',
  'C-T550',
  'C-T553',
  'C-T557',
  'C-T564',
  'C-T731',
  'C-T5100',
  'S125',
  'S187',
  'S188',
  'S222',
  'S223',
  'S226',
  'S227',
  'S228',
  'CA1000',
  'OS2',
  'OS10',
  'OS20',
  'OS25',
  'RC826',
  'RC862',
  'RC863',
  'RC864',
  'RC886',
  'RC887',
  'R-C661',
  'R-R820',
  'R-A2000',
  'R-OSA',
  'R-OS8',
  'R-OS84',
  'R-T600',
  'R-T620',
  'R-T860',
  'TAC850',
  'TAC-R750',
  'TAC-R777',
  'TAC-OS74',
  'TAC-OS75',
  'TAC-850GR',
  'CA1500',
  'CA2400',
  'OSA',
  'R160',
  'R221',
  'R519',
  'OS31',
  'OS35',
  'OS37',
  'OS61',
  'T215',
  'T220',
  'T305',
  'T350',
  'T464',
  'T600',
  'T715',
  'T900',
  'T950',
  'T970',
];

// Normalize product IDs for comparison (handle case-insensitive and variations)
export function normalizeProductId(productId: string): string {
  // Convert to uppercase and handle common variations
  let normalized = productId.toUpperCase().trim();
  
  // Handle 81-0389 vs 81-O389 variation
  normalized = normalized.replace(/81-O389/g, '81-0389');
  
  return normalized;
}

// Check if a product ID is in the allowed list
export function isProductAllowed(productId: string): boolean {
  const normalized = normalizeProductId(productId);
  return ALLOWED_PRODUCT_IDS.some(id => normalizeProductId(id) === normalized);
}

// Get all allowed product IDs (normalized)
export function getAllowedProductIds(): string[] {
  return ALLOWED_PRODUCT_IDS.map(normalizeProductId);
}

